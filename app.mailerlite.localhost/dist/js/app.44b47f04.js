(function(t){function e(e){for(var s,l,o=e[0],n=e[1],c=e[2],u=0,f=[];u<o.length;u++)l=o[u],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&f.push(i[l][0]),i[l]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);d&&d(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,o=1;o<a.length;o++){var n=a[o];0!==i[n]&&(s=!1)}s&&(r.splice(e--,1),t=l(l.s=a[0]))}return t}var s={},i={app:0},r=[];function l(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=s,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(a,s,function(e){return t[e]}.bind(null,s));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],n=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=n;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"0c25":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],l=(a("034f"),a("2877")),o={},n=Object(l["a"])(o,i,r,!1,null,null,null),c=n.exports,d=a("8c4f"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard"},[a("NavBar"),a("div",{staticClass:"container"},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-sm-8 col-xs-12"},[a("h2",[t._v(t._s(t.label))])]),a("div",{staticClass:"col-sm-4 col-xs-12 text-right"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.createSubscriber()}}},[a("b-icon",{attrs:{icon:"plus-circle"}}),t._v(" New Subscriber ")],1)])]),a("table",{staticClass:"table table-hover table-striped"},[t._m(0),a("tbody",t._l(t.subscribers,(function(e){return a("tr",{key:e.id,on:{click:function(a){return t.edit(e.id)}}},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.email))]),a("td",[t._v(t._s(e.state_label))])])})),0)])])],1)},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Full name")]),a("th",{attrs:{scope:"col"}},[t._v("Email")]),a("th",{attrs:{scope:"col"}},[t._v("State")])])])}],m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:""}},[a("b-navbar-brand",{staticClass:"pl-1",attrs:{href:"/"}},[a("img",{attrs:{width:"100px",src:"/logo-color.png",alt:""}})]),a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item",{attrs:{href:"/subscribers"}},[t._v("Subscribers")]),a("b-nav-item",{attrs:{href:"/fields"}},[t._v("Fields")])],1)],1)],1)],1)},b=[],v={name:"NavBar"},p=v,h=(a("6bf6"),Object(l["a"])(p,m,b,!1,null,"139a02da",null)),_=h.exports,g=a("bc3a"),C=a.n(g),y={name:"Dashboard",components:{NavBar:_},methods:{edit:function(t){this.$router.push("subscribers/".concat(t,"/edit"))},createSubscriber:function(){this.$router.push("subscribers/create")}},mounted:function(){var t=this;C.a.get("http://api.mailerlite.localhost/subscribers").then((function(e){t.subscribers=e.data.subscribers}))},data:function(){return{subscribers:null,label:"Subscribers list"}}},x=y,k=Object(l["a"])(x,u,f,!1,null,"47661703",null),w=k.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit"},[a("NavBar"),a("div",{staticClass:"container"},[a("div",{staticClass:"row mb-3"},[t._m(0),a("div",{staticClass:"col-sm-4 col-xs-12 text-right"},[a("a",{attrs:{href:"/subscribers"}},[a("b-icon",{attrs:{icon:"box-arrow-in-left"}}),t._v(" Go back")],1)])]),a("form",{attrs:{action:"/subscribers/:subscriber.id/edit"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group text-left"},[a("label",{staticClass:"control-label",attrs:{for:"name"}},[t._v("Full name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",id:"name"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})]),a("div",{staticClass:"form-group text-left"},[a("label",{staticClass:"control-label",attrs:{for:"email"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",attrs:{type:"text",name:"email",id:"email"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}})]),a("div",{staticClass:"form-group text-left"},[a("label",{staticClass:"control-label",attrs:{for:"state"}},[t._v("State")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.state,expression:"form.state"}],staticClass:"form-control",attrs:{name:"state",id:"state"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"state",e.target.multiple?a:a[0])}}},t._l(t.states,(function(e){return a("option",{key:e.id,domProps:{value:e.id,selected:e.id==t.form.state}},[t._v(" "+t._s(e.label)+" ")])})),0)])]),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group text-left"},[a("label",{staticClass:"control-label",attrs:{for:"state"}},[t._v("Fields")]),a("div",{staticClass:"fields"},[t.form.fields?a("form",t._l(t.form.fields,(function(e){return a("div",{key:e.id,staticClass:"row align-items-end form-group"},[a("div",{staticClass:"text-left col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.field_id,expression:"field.field_id"}],attrs:{type:"hidden",name:"old_field"},domProps:{value:e.field_id},on:{input:function(a){a.target.composing||t.$set(e,"field_id",a.target.value)}}}),a("label",{staticClass:"control-label",attrs:{for:"field_id"}},[t._v("Field type")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.field_id,expression:"field.field_id"}],staticClass:"form-control",attrs:{name:"field_id",id:"field_id"},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"field_id",a.target.multiple?s:s[0])}}},t._l(t.fields,(function(s){return a("option",{key:s.id,domProps:{value:s.id,selected:s.id==e.field_id}},[t._v(" "+t._s(s.title)+" ")])})),0)]),a("div",{staticClass:"text-left col"},[a("label",{staticClass:"control-label",attrs:{for:"value"}},[t._v("Value")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"field.value"}],staticClass:"form-control",attrs:{type:"text",name:"value",id:"value"},domProps:{value:e.value},on:{input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}})]),a("div",{staticClass:"text-left col"},[a("button",{staticClass:"btn btn-primary mr-3",attrs:{type:"button"},on:{click:function(a){return t.editSubscriberField(t.form.id,e.field_id,e.value,e.id)}}},[t._v("Edit")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(a){return t.deleteSubscriberField(t.form.id,e.id)}}},[t._v("Delete")])])])})),0):t._e(),a("form",[a("div",{staticClass:"row align-items-end"},[a("div",{staticClass:"text-left col"},[a("label",{staticClass:"control-label",attrs:{for:"subscriber_field"}},[t._v("Field type")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.subscriberFields.field_id,expression:"subscriberFields.field_id"}],staticClass:"form-control",attrs:{required:"",name:"field_id",id:"subscriber_field"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.subscriberFields,"field_id",e.target.multiple?a:a[0])}}},t._l(t.fields,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.title)+" ")])})),0)]),a("div",{staticClass:"text-left col"},[a("label",{staticClass:"control-label",attrs:{for:"subscriber_value"}},[t._v("Value")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.subscriberFields.value,expression:"subscriberFields.value"}],staticClass:"form-control",attrs:{required:"",name:"value",id:"subscriber_value"},domProps:{value:t.subscriberFields.value},on:{input:function(e){e.target.composing||t.$set(t.subscriberFields,"value",e.target.value)}}})]),a("div",{staticClass:"text-left col"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.addSubscriberField(t.form.id)}}},[t._v("Add field")])])])])])])])]),a("div",{staticClass:"form-group d-flex justify-content-between"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.edit(t.form.id)}}},[t.loading?a("div",{staticClass:"spinner-border spinner-border-sm"}):t._e(),t.loading?a("span",{staticClass:"px-1"},[t._v("Saving")]):a("span",[t._v("Save")])]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.destroy(t.form.id)}}},[t._v("Delete")])])])])],1)},$=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-8 col-xs-12"},[a("h3",[t._v("Edit Subscriber")])])}],S=(a("99af"),a("b0c0"),{name:"Edit",components:{NavBar:_},data:function(){return{id:null,form:{id:null,name:null,email:null,state:null,fields:[]},fields:[],subscriberFields:{subscriber_id:null,field_id:null,value:null},fieldMetaData:[{type:"date",id:"1"},{type:"text",id:"3"}],states:[{id:1,label:"Active"},{id:2,label:"Unsubscribed"},{id:3,label:"Junk"},{id:4,label:"Bounced"},{id:5,label:"Unconfirmed"}],loading:!1}},methods:{edit:function(t){var e=this;this.loading=!0,C.a.put("http://api.mailerlite.localhost/subscribers/".concat(t),this.form).then((function(t){var a="An error has occurred",s="There has been an error updating this subscriber",i="danger";200===t.data.code&&(a="Success",s="Subscriber updated successfully",i="success"),e.loading=!1,e.makeToast(a,s,i)})).catch((function(t){e.loading=!1,e.makeToast("Warning",t.response.data.message,"danger")}))},destroy:function(t){var e=this;C.a.delete("http://api.mailerlite.localhost/subscribers/".concat(t)).then((function(t){200===t.data.code&&(e.makeToast("Success","Subscriber deleted successfully","success"),setTimeout((function(){e.$router.push("/subscribers")}),1e3))}))},addSubscriberField:function(t){var e=this;this.subscriberFields.value&&this.subscriberFields.field_id?C.a.post("http://api.mailerlite.localhost/subscribers/".concat(t,"/fields"),this.subscriberFields).then((function(t){202===t.data.code&&(e.makeToast("Success","Subscriber field added successfully","success"),setTimeout((function(){location.reload()}),500))})).catch((function(){e.makeToast("Warning","An error has occurred adding the field to this subscriber","danger")})):this.makeToast("Warning","An error has occurred adding the field to this subscriber","danger")},editSubscriberField:function(t,e,a,s){var i=this,r={subscriber_id:t,field_id:e,value:a};C.a.put("http://api.mailerlite.localhost/subscribers/".concat(t,"/fields/").concat(s),r).then((function(t){200===t.data.code&&i.makeToast("Success","Subscriber field updated successfully","success")})).catch((function(){i.makeToast("Warning","An error has occurred updating the field to this subscriber","danger")}))},deleteSubscriberField:function(t,e){var a=this;C.a.delete("http://api.mailerlite.localhost/subscribers/".concat(t,"/fields/").concat(e)).then((function(t){200===t.data.code&&(a.makeToast("Success","Subscriber field deleted successfully","success"),setTimeout((function(){location.reload()}),500))})).catch((function(){a.makeToast("Warning","An error has occurred deleting the field to this subscriber","danger")}))},makeToast:function(t,e,a){this.toastCount++,this.$bvToast.toast(e,{title:t,variant:a,autoHideDelay:5e3,appendToast:!0})}},mounted:function(){var t=this;this.form.id=this.$route.params.subscriber,this.subscriberFields.subscriber_id=this.$route.params.subscriber,C.a.get("http://api.mailerlite.localhost/subscribers/".concat(this.form.id),{}).then((function(e){t.form.name=e.data.subscriber.name,t.form.email=e.data.subscriber.email,t.form.state=e.data.subscriber.state,t.form.fields=e.data.subscriber.fields})),C.a.get("http://api.mailerlite.localhost/fields").then((function(e){t.fields=e.data.fields}))}}),F=S,N=Object(l["a"])(F,T,$,!1,null,"5849f258",null),E=N.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create"},[a("NavBar"),a("div",{staticClass:"container"},[a("div",{staticClass:"row mb-3"},[t._m(0),a("div",{staticClass:"col-sm-4 col-xs-12 text-right"},[a("a",{attrs:{href:"/subscribers"}},[a("b-icon",{attrs:{icon:"box-arrow-in-left"}}),t._v(" Go back")],1)])]),a("form",{staticClass:"form-horizontal",attrs:{action:"/subscribers/",method:"post"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group text-left"},[a("label",{staticClass:"control-label",attrs:{for:"name"}},[t._v("Full name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",id:"name"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})]),a("div",{staticClass:"form-group text-left"},[a("label",{staticClass:"control-label",attrs:{for:"email"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",attrs:{type:"text",name:"email",id:"email"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}})])]),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group text-left"},[a("label",{staticClass:"control-label",attrs:{for:"state"}},[t._v("State")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.state,expression:"form.state"}],staticClass:"form-control",attrs:{name:"state",id:"state"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"state",e.target.multiple?a:a[0])}}},t._l(t.states,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.label)+" ")])})),0)])])]),a("div",{staticClass:"form-group d-flex justify-content-start"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.create(t.form.id)}}},[t.loading?a("div",{staticClass:"spinner-border spinner-border-sm"}):t._e(),t.loading?a("span",{staticClass:"px-1"},[t._v("Creating")]):a("span",[t._v("Create")])])])])])],1)},j=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-8 col-xs-12"},[a("h3",[t._v("Create Subscriber")])])}],O={name:"Create",components:{NavBar:_},data:function(){return{form:{id:null,name:null,email:null,state:null},states:[{id:1,label:"Active"},{id:2,label:"Unsubscribed"},{id:3,label:"Junk"},{id:4,label:"Bounced"},{id:5,label:"Unconfirmed"}],loading:!1}},methods:{create:function(){var t=this;this.loading=!0,C.a.post("http://api.mailerlite.localhost/subscribers",this.form).then((function(e){202==e.data.code&&(t.makeToast("Success","Subscriber created successfully","success"),setTimeout((function(){t.$router.push("/subscribers/".concat(e.data.subscriber.id,"/edit"))}),2e3)),t.loading=!1})).catch((function(e){t.loading=!1,t.makeToast("Warning",e.response.data.message,"danger")}))},makeToast:function(t,e,a){this.toastCount++,this.$bvToast.toast(e,{title:t,variant:a,autoHideDelay:5e3,appendToast:!0})}}},A=O,B=Object(l["a"])(A,P,j,!1,null,"be45bf16",null),D=B.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard"},[a("NavBar"),a("div",{staticClass:"container"},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-sm-8 col-xs-12"},[a("h2",[t._v(t._s(t.label))])]),a("div",{staticClass:"col-sm-4 col-xs-12 text-right"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.createField()}}},[a("b-icon",{attrs:{icon:"plus-circle"}}),t._v(" New Field ")],1)])]),a("table",{staticClass:"table table-hover table-striped"},[t._m(0),a("tbody",t._l(t.fields,(function(e){return a("tr",{key:e.id,on:{click:function(a){return t.edit(e.id)}}},[a("td",[t._v(t._s(e.title))]),a("td",[t._v(t._s(e.type_label))]),a("td",[t._v(t._s(e.is_used?"Yes":"No"))])])})),0)])])],1)},U=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Field")]),a("th",{attrs:{scope:"col"}},[t._v("Type")]),a("th",{attrs:{scope:"col"}},[t._v("Is being used")])])])}],M={name:"Dashboard",components:{NavBar:_},methods:{edit:function(t){this.$router.push("fields/".concat(t,"/edit"))},createField:function(){this.$router.push("fields/create")}},mounted:function(){var t=this;C.a.get("http://api.mailerlite.localhost/fields").then((function(e){t.fields=e.data.fields}))},data:function(){return{fields:null,label:"Fields list"}}},G=M,H=Object(l["a"])(G,W,U,!1,null,"6e294374",null),J=H.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create"},[a("NavBar"),a("div",{staticClass:"container"},[a("div",{staticClass:"row mb-3"},[t._m(0),a("div",{staticClass:"col-sm-4 col-xs-12 text-right"},[a("a",{attrs:{href:"/fields"}},[a("b-icon",{attrs:{icon:"box-arrow-in-left"}}),t._v(" Go back")],1)])]),a("form",{staticClass:"form-horizontal",attrs:{action:"/fields/",method:"post"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group text-left"},[a("label",{staticClass:"control-label",attrs:{for:"title"}},[t._v("Title")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",attrs:{type:"text",name:"title",id:"title"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})])]),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group text-left"},[a("label",{staticClass:"control-label",attrs:{for:"type"}},[t._v("Type")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.type,expression:"form.type"}],staticClass:"form-control",attrs:{name:"type",id:"type"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"type",e.target.multiple?a:a[0])}}},t._l(t.types,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.label)+" ")])})),0)])])]),a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.create(t.form.id)}}},[t.loading?a("div",{staticClass:"spinner-border spinner-border-sm"}):t._e(),t.loading?a("span",{staticClass:"px-1"},[t._v("Creating")]):a("span",[t._v("Create")])])])])])],1)},q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-8 col-xs-12"},[a("h3",[t._v("Create Field")])])}],V={name:"Create",components:{NavBar:_},data:function(){return{form:{id:null,title:null,type:null},types:[{id:1,label:"Date"},{id:2,label:"Number"},{id:3,label:"String"},{id:4,label:"Boolean"}],loading:!1}},methods:{create:function(){var t=this;this.loading=!0,C.a.post("http://api.mailerlite.localhost/fields",this.form).then((function(e){202==e.data.code&&(t.makeToast("Success","Field created successfully","success"),setTimeout((function(){t.$router.push("/fields/".concat(e.data.field.id,"/edit"))}),2e3)),t.loading=!1})).catch((function(){t.loading=!1,t.makeToast("Warning","An error has occurred creating the Field","danger")}))},makeToast:function(t,e,a){this.toastCount++,this.$bvToast.toast(e,{title:t,variant:a,autoHideDelay:5e3,appendToast:!0})}}},I=V,Y=Object(l["a"])(I,z,q,!1,null,"125da18e",null),K=Y.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit"},[a("NavBar"),a("div",{staticClass:"container"},[a("div",{staticClass:"row mb-3"},[t._m(0),a("div",{staticClass:"col-sm-4 col-xs-12 text-right"},[a("a",{attrs:{href:"/fields"}},[a("b-icon",{attrs:{icon:"box-arrow-in-left"}}),t._v(" Go back")],1)])]),a("form",{staticClass:"form-horizontal",attrs:{action:"/fields/",method:"post"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group text-left"},[a("label",{staticClass:"control-label",attrs:{for:"title"}},[t._v("Title")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",attrs:{type:"text",name:"title",id:"title"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})])]),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group text-left"},[a("label",{staticClass:"control-label",attrs:{for:"type"}},[t._v("Type")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.type,expression:"form.type"}],staticClass:"form-control",attrs:{name:"type",id:"type"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"type",e.target.multiple?a:a[0])}}},t._l(t.types,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.label)+" ")])})),0)])])]),t.form.beingUsed?a("div",{staticClass:"row"},[t._m(1)]):t._e(),a("div",{staticClass:"form-group d-flex justify-content-between"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.edit(t.form.id)}}},[t.loading?a("div",{staticClass:"spinner-border spinner-border-sm"}):t._e(),t.loading?a("span",{staticClass:"px-1"},[t._v("Saving")]):a("span",[t._v("Save")])]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.destroy(t.form.id)}}},[t._v("Delete")])])])])],1)},Q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-8 col-xs-12"},[a("h3",[t._v("Edit Field")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col"},[a("div",{staticClass:"alert alert-primary",attrs:{role:"alert"}},[t._v(" This field has subscribers using it! ")])])}],R={name:"Edit",components:{NavBar:_},data:function(){return{id:null,form:{id:null,title:null,type:null,beingUsed:!1},types:[{id:1,label:"Date"},{id:2,label:"Number"},{id:3,label:"String"},{id:4,label:"Boolean"}],loading:!1}},methods:{edit:function(t){var e=this;this.loading=!0,C.a.put("http://api.mailerlite.localhost/fields/".concat(t),this.form).then((function(t){var a="An error has occurred",s="There has been an error updating this Field",i="danger";200===t.data.code&&(a="Success",s="Field updated successfully",i="success"),e.loading=!1,e.makeToast(a,s,i)}))},destroy:function(t){var e=this;this.form.beingUsed?this.makeToast("Warning","This Field is being used by subscribers, delete it from them first","danger"):C.a.delete("http://api.mailerlite.localhost/fields/".concat(t)).then((function(t){200===t.data.code&&(e.makeToast("Success","Field successfully deleted","success"),setTimeout((function(){e.$router.push("/fields")}),1e3))})).catch((function(){e.loading=!1,e.makeToast("Warning","An error has occurred deleting this Field","danger")}))},makeToast:function(t,e,a){this.toastCount++,this.$bvToast.toast(e,{title:t,variant:a,autoHideDelay:5e3,appendToast:!0})}},mounted:function(){var t=this;this.form.id=this.$route.params.field,C.a.get("http://api.mailerlite.localhost/fields/".concat(this.form.id)).then((function(e){t.form.title=e.data.field.title,t.form.type=e.data.field.type,t.form.beingUsed=e.data.field.is_used})).catch((function(){t.makeToast("Warning","An error has occurred fetching this Field","danger")}))}},X=R,Z=Object(l["a"])(X,L,Q,!1,null,"8e306216",null),tt=Z.exports;s["default"].use(d["a"]);var et=[{path:"/",name:"Dashboard",component:w},{path:"/subscribers",name:"Subscribers",component:w},{path:"/subscribers/create",name:"CreateSubscriber",component:D},{path:"/subscribers/:subscriber/edit",name:"EditSubscriber",component:E},{path:"/fields",name:"Fields",component:J},{path:"/fields/create",name:"CreateField",component:K},{path:"/fields/:field/edit",name:"EditField",component:tt}],at=new d["a"]({mode:"history",base:"/",routes:et}),st=at,it=a("5f5b"),rt=a("b1e0"),lt=a("2106"),ot=a.n(lt);a("f9e3"),a("2dd8");s["default"].config.productionTip=!1,s["default"].use(it["a"]),s["default"].use(rt["b"]),s["default"].use(rt["a"]),s["default"].use(ot.a,C.a),new s["default"]({router:st,render:function(t){return t(c)}}).$mount("#app")},"6bf6":function(t,e,a){"use strict";a("0c25")},"85ec":function(t,e,a){}});
//# sourceMappingURL=app.44b47f04.js.map